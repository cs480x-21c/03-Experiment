<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pie Chart</title>
</head>
<body>
<script src="https://d3js.org/d3.v6.min.js"></script>
    <script>
        console.log(d3);
        var margin = {top: 10, right: 30, bottom: 40, left: 40},
        width = 500 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

        var maxNumGroups = 10;
        var minNumGroups = 5;

        var data = [];
        var numGroups = Math.random() * ((maxNumGroups - minNumGroups)) + minNumGroups;
        //console.log(numGroups);

        for(var i = 0; i < numGroups; i++){
            var newNumber = Math.random() * 50;
            data.push(newNumber);
        }

        var svg = d3.select("body")
                        .append("svg")
                        .data([data])
                        .attr("width", width + margin.left + margin.right)
                        .attr("height", height + margin.top + margin.bottom)
                        .append("g")
                        .attr("transform", "translate(" + 110 + "," + 110 + ")")

        var pie = d3.pie()

        var arc = d3.arc()
                    .innerRadius(0)
                    .outerRadius(100)

        var arcs = svg.selectAll("arc")
                    .data(pie(data))
                    .enter()
                    .append("g")
                    .attr("class", "arc")
                    .style("stroke", "black")

        arcs.append("path")
            .attr("fill", "white")
            .attr("d", arc);

        arcs.append("svg:text")
            .attr("transform", function(d) {
                d.innerRadius = 0;
                d.outerRadius = 100;
                return "translate(" + arc.centroid(d) + ")";
            })
            .attr("text-anchor", "middle")
            .text(function(d, i) { return i + 1 })
            .style("font-size", "10px");

        svg.append("text").text(
            "What percentage is slice " + (data.indexOf(d3.min(data)) + 1) +
            " of slice " + (data.indexOf(d3.max(data)) + 1) + "?"
        )
        .attr("transform", "translate(" +  (-100) + "," + (150) + ")")

        console.log(data.indexOf(d3.max(data)) + 1)
        console.log(data.indexOf(d3.min(data)) + 1)
    </script>
</body>
</html>